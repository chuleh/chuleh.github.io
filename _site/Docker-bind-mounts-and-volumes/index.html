<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.16.5 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Docker: Bind Mounts And Volumes - chule.io</title>
<meta name="description" content="Hi, in today’s post we’re going to continue with our docker series. If you’re new to docker I suggest reading at least my Intro to Docker.In this lecture we’re going to talk about bind mounts and volumes.We’re going to use the nginx image from our previous lesson and do stuff with it, so my recommendation is if you haven’t done that tutorial yet, go do it first.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="chule.io">
<meta property="og:title" content="Docker: Bind Mounts And Volumes">
<meta property="og:url" content="http://localhost:4000/Docker-bind-mounts-and-volumes/">


  <meta property="og:description" content="Hi, in today’s post we’re going to continue with our docker series. If you’re new to docker I suggest reading at least my Intro to Docker.In this lecture we’re going to talk about bind mounts and volumes.We’re going to use the nginx image from our previous lesson and do stuff with it, so my recommendation is if you haven’t done that tutorial yet, go do it first.">







  <meta property="article:published_time" content="2019-03-22T00:00:00-03:00">





  

  


<link rel="canonical" href="http://localhost:4000/Docker-bind-mounts-and-volumes/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "chule",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="chule.io Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          chule.io
          
        </a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">chule</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>DevOps Engineer, yoga ashtanga practitioner and longboard rider</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Buenos Aires, Argentina</span>
        </li>
      

      
        
          
        
          
        
          
        
          
        
          
        
          
        
      

      

      
        <li>
          <a href="mailto:lcasarettom@gmail.com">
            <meta itemprop="email" content="lcasarettom@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Docker: Bind Mounts And Volumes">
    <meta itemprop="description" content="Hi, in today’s post we’re going to continue with our docker series. If you’re new to docker I suggest reading at least my Intro to Docker.In this lecture we’re going to talk about bind mounts and volumes.We’re going to use the nginx image from our previous lesson and do stuff with it, so my recommendation is if you haven’t done that tutorial yet, go do it first.">
    <meta itemprop="datePublished" content="March 22, 2019">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Docker: Bind Mounts And Volumes
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  3 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Hi, in today’s post we’re going to continue with our <code class="highlighter-rouge">docker</code> series. If you’re new to <code class="highlighter-rouge">docker</code> I suggest reading at least my <a href="/intro-to-docker/">Intro to Docker</a>.
In this lecture we’re going to talk about <code class="highlighter-rouge">bind mounts</code> and <code class="highlighter-rouge">volumes</code>.
We’re going to use the <code class="highlighter-rouge">nginx</code> image from our <a href="/Docker-port-forwarding/">previous lesson</a> and do stuff with it, so my recommendation is if you haven’t done that tutorial yet, go do it first.</p>

<p>What’s the point of of this? Well, <code class="highlighter-rouge">bind mounts</code> and <code class="highlighter-rouge">volumes</code> are perfect for when you want to stop and delete containers without losing data.</p>

<h1 id="bind-mounts">Bind mounts</h1>
<p>A <code class="highlighter-rouge">bind mount</code> is rather simple. It takes a host path, eg: <code class="highlighter-rouge">/data</code> and mounts it inside your container, eg: <code class="highlighter-rouge">/usr/data</code>.
It is very simple and fast to use, the only downside is that you need to specify it at runtime. That means you need to specify it when you type our <code class="highlighter-rouge">docker container run</code> command.</p>

<p>Let’s take a look at it. I’m going to work on my <code class="highlighter-rouge">nginx</code> directory from the previous lesson. By now you should already have your <code class="highlighter-rouge">nginx</code> image. If you’re like me that you regularly <code class="highlighter-rouge">prune</code> your computer, just download it again with <code class="highlighter-rouge">docker pull nginx</code>.</p>

<figure class="highlight"><pre><code class="language-raw" data-lang="raw">docker/nginx [chuleh●] » docker pull nginx
Using default tag: latest
latest: Pulling from library/nginx
Digest: sha256:98efe605f61725fd817ea69521b0eeb32bef007af0e3d0aeb6258c6e6fe7fc1a
Status: Image is up to date for nginx:latest</code></pre></figure>

<p>Next, I will create a directory named <code class="highlighter-rouge">content</code> where I will store a very basic <code class="highlighter-rouge">index.html</code> file.</p>

<figure class="highlight"><pre><code class="language-raw" data-lang="raw">docker/nginx [chuleh●] » mkdir content
docker/nginx [chuleh●] » cd content
nginx/content [chuleh●] » echo "Hello World" &gt; index.html</code></pre></figure>

<p>Now it’s time to run the container with our data, for this we’re going to use the <code class="highlighter-rouge">-v</code> flag when we run our <code class="highlighter-rouge">docker container</code>. Remember from the past lesson we need to specify the port with the <code class="highlighter-rouge">-p</code> flag and I will run it with the <code class="highlighter-rouge">-d</code> flag for it to run detached.</p>

<p>The command should look similar to this <code class="highlighter-rouge">docker container run -p 8080:80 -v /Users/chuleh/docker/nginx/content/:/usr/share/nginx/html:ro -d nginx</code>.
Of course, change the path to match the one on your end.</p>

<figure class="highlight"><pre><code class="language-raw" data-lang="raw">docker/nginx [chuleh●] » docker container run -p 8080:80 -v /Users/chuleh/docker/nginx/content/:/usr/share/nginx/html:ro -d nginx
b8d993a08c463e2fcc2e497ca8f54ec6e4087a0edd66f4e3ed9aaeb0ab3e2df3</code></pre></figure>

<p>Also notice I typed <code class="highlighter-rouge">:ro</code>, this is to make the volume <code class="highlighter-rouge">read-only</code> making the container unable to edit the files on the host.</p>

<p>If everything went correctly, I should be able to <code class="highlighter-rouge">curl</code> localhost and get the <code class="highlighter-rouge">Hello world</code> message back.</p>

<figure class="highlight"><pre><code class="language-raw" data-lang="raw">docker/nginx [chuleh●] » curl localhost:8080
Hello World</code></pre></figure>

<p>And that’s it, you’ve got a container running with your custom data. Now we can stop the container and the data will remain in our local directory.</p>

<figure class="highlight"><pre><code class="language-raw" data-lang="raw">docker/nginx [chuleh●] » docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
b8d993a08c46        nginx               "nginx -g 'daemon of…"   12 minutes ago      Up 12 minutes       0.0.0.0:8080-&gt;80/tcp   dreamy_bohr
docker/nginx [chuleh●] » docker stop b8d993a08c46
b8d993a08c46</code></pre></figure>

<h1 id="volumes">Volumes</h1>
<p>Volumes are entities inside <code class="highlighter-rouge">docker</code>. We’re going to create a volume named <code class="highlighter-rouge">data</code> from the <code class="highlighter-rouge">cli</code> with the following command: <code class="highlighter-rouge">docker volume create data</code>.</p>

<figure class="highlight"><pre><code class="language-raw" data-lang="raw">docker/nginx [chuleh●] » docker volume create data
data</code></pre></figure>

<p>You see <code class="highlighter-rouge">docker</code> creates the <code class="highlighter-rouge">volume</code> and outputs its name. If you paid attention, you’ll see we didn’t specify where the data is mounted on the host. Do not worry, we’re going to use the <code class="highlighter-rouge">inspect</code> command to have an in-depth look at the volume.
Type <code class="highlighter-rouge">docker volume inspect data</code></p>

<figure class="highlight"><pre><code class="language-raw" data-lang="raw">docker/nginx [chuleh●] » docker volume inspect data
[
    {
        "CreatedAt": "2019-03-22T18:03:07Z",
        "Driver": "local",
        "Labels": {},
        "Mountpoint": "/var/lib/docker/volumes/data/_data",
        "Name": "data",
        "Options": {},
        "Scope": "local"
    }
]</code></pre></figure>

<p>We can see that the data is stored in <code class="highlighter-rouge">/var/lib/docker/volumes/data/_data</code> on the host.</p>

<p>Now, we only need to run the container with the <code class="highlighter-rouge">-v</code> flag again.</p>

<figure class="highlight"><pre><code class="language-raw" data-lang="raw">docker/nginx [chuleh●] » docker container run -v data:/usr/share/nginx/html -p 8080:80 -d nginx
312142394f02a7d5ce0949b49ed644eea7f95eed8ab116818cf2279c208d20bf</code></pre></figure>

<p>Data is empty so there’s no point in doing a <code class="highlighter-rouge">curl</code> to the localhost:8080 as it will return the default nginx index.html.</p>

<h1 id="cleaning-up">Cleaning up</h1>
<p>Stop your container with <code class="highlighter-rouge">docker stop</code>. Then we need to check the volumes that are scattered around with <code class="highlighter-rouge">docker volume ls</code>.</p>

<figure class="highlight"><pre><code class="language-raw" data-lang="raw">docker/nginx [chuleh●] » docker volume ls
DRIVER              VOLUME NAME
local               content
local               data</code></pre></figure>

<p>You can see I have two volumes. I can delete them with <code class="highlighter-rouge">docker volume rm</code> or I can <code class="highlighter-rouge">prune</code> them with <code class="highlighter-rouge">docker volume prune</code>. In my case I will use <code class="highlighter-rouge">prune</code> since I don’t care about these two volumes.</p>

<h1 id="wrap-up">Wrap up</h1>
<ul>
  <li><code class="highlighter-rouge">-v /path/to/something:/path/in/container</code> is a bind mount.</li>
  <li><code class="highlighter-rouge">-v path:/path/in/container</code> is a volume.</li>
</ul>

<p>And that’s pretty much it. Make sure you’re comfortable with this, play around with the commands for in the next lesson we’re going to take a more in-depth look at docker and <code class="highlighter-rouge">Dockerfile</code>, allowing us to create our own images.</p>

<p>:wq</p>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2019-03-22T00:00:00-03:00">March 22, 2019</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Docker%3A+Bind+Mounts+And+Volumes%20http%3A%2F%2Flocalhost%3A4000%2FDocker-bind-mounts-and-volumes%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2FDocker-bind-mounts-and-volumes%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Flocalhost%3A4000%2FDocker-bind-mounts-and-volumes%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/Docker-port-forwarding/" class="pagination--pager" title="Docker: Port  Forwarding
">Previous</a>
    
    
      <a href="/Docker-what-is-a-Dockerfile/" class="pagination--pager" title="Docker: What Is A Dockerfile
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Docker-Docker-compose/" rel="permalink">Docker: Docker Compose
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  8 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Hi, in today’s post we will take a look at a new command: docker-compose.
For this, we will create new nodejs app that will act as a visitor counter from the...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Docker-WORKDIR-and-rebuilds/" rel="permalink">Docker: Workdir And Rebuilds
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  10 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Hi, in today’s post we will continue from where we left off with our Docker series. We’re going to work with the Dockerfile from our previous lesson and work...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Docker-diving-deeper-into-Dockerfile/" rel="permalink">Docker: Diving Deeper Into Dockerfile
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Hi, in today’s lecture we will continue with our Dockerfile tutorial. In our previous lecture we created a Dockerfile for our redis-server and saw how to bui...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Docker-what-is-a-Dockerfile/" rel="permalink">Docker: What Is A Dockerfile
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  5 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">Hi, in today’s post we’re going to take a look at something completely new: Dockerfile. Until now we have been using community images that just worked, but w...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2019 chule. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>










  </body>
</html>
